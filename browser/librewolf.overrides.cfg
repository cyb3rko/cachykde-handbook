/**
 * Disable accessibility services
 */
lockPref("accessibility.force_disabled", 1)

/**
 * Booksmarks:
 *  - disable default bookmarks
 *  - show mobile bookmarks
 */
lockPref("browser.bookmarks.restore_default_bookmarks", false)
lockPref("browser.bookmarks.showMobileBookmarks", true)

/**
 * Disable disk cache
 */
lockPref("browser.cache.disk.enable", false)

/**
 * Downloads:
 *  - automatically download to download folder
 *  - show download popup on download
 */
lockPref("browser.download.alwaysOpenPanel", true)
lockPref("browser.download.useDownloadDir", true)

/**
 * Delete temp files on exit
 */
lockPref("browser.helperApps.deleteTempFileOnExit", true)

/**
 * Disable AI chat features
 */
lockPref("browser.ml.chat.enabled", false)
lockPref("browser.ml.chat.hideFromLabs", true)
lockPref("browser.ml.chat.hideLabsShortcuts", true)
lockPref("browser.ml.enable", false)

/**
 * Safebrowsing:
 *  - disable all safebrowsing components
 *  - clear safebrowsing URLs, just to be sure
 */
lockPref("browser.safebrowsing.blockedURIs.enabled", false)
lockPref("browser.safebrowsing.downloads.enabled", false)
lockPref("browser.safebrowsing.downloads.remote.enabled", false)
lockPref("browser.safebrowsing.downloads.remote.block_potentially_unwanted", false)
lockPref("browser.safebrowsing.downloads.remote.block_uncommon", false)
lockPref("browser.safebrowsing.downloads.remote.url", "")
lockPref("browser.safebrowsing.malware.enabled", false)
lockPref("browser.safebrowsing.phishing.enabled", false)
lockPref("browser.safebrowsing.provider.google.gethashURL", "")
lockPref("browser.safebrowsing.provider.google.updateURL", "")
lockPref("browser.safebrowsing.provider.google4.dataSharingURL", "")
lockPref("browser.safebrowsing.provider.google4.gethashURL", "")
lockPref("browser.safebrowsing.provider.google4.updateURL", "")

/**
 * Sessions:
 *  - remember up to 20 navigation history entries
 *  - forget closed tabs from all windows/sessions
 *  - suppress restore after crash
 *  - save shortcut favicons
 */
lockPref("browser.sessionhistory.max_entries", 20)
lockPref("browser.sessionstore.closedTabsFromAllWindows", false)
lockPref("browser.sessionstore.closedTabsFromClosedWindows", false)
lockPref("browser.sessionstore.max_resumed_crashes", 0)
lockPref("browser.sessionstore.resume_from_crash", false)
lockPref("browser.sessionstore.resume_session_once", false)
lockPref("browser.sessionstore.persist_closed_tabs_between_sessions", false)

/**
 * Allow shortcut favicons
 */
lockPref("browser.shell.shortcutFavicons", true)

/**
 * Spin cursor when loading
 */
lockPref("browser.spin_cursor_while_busy", true)

/**
 * Suppress session restore on startup
 */
lockPref("browser.startup.couldRestoreSession.count", 0)

/**
 * Load opened bookmarks in background
 */
lockPref("browser.tabs.loadBookmarksInBackground", true)

/**
 * Disable page translations
 */
lockPref("browser.translations.automaticallyPopup", false)
lockPref("browser.translations.enable", false)
lockPref("browser.translations.panelShown", false)

/**
 * URL bar:
 *  - show search suggestions at the top
 *  - allow speculative connect
 *  - show full URL
 */
lockPref("browser.urlbar.showSearchSuggestionsFirst", false)
lockPref("browser.urlbar.speculativeConnect.enabled", true)
lockPref("browser.urlbar.trimURLs", false)

/**
 * Speed up content rerendering
 * [Fastfox]
 */
lockPref("content.notify.interval", 100000)

/**
 * Devtools:
 *  - disable accessibility features
 *  - disable style editor
 *  - show toolbox on the right
 */
lockPref("devtools.accessibility.enabled", false)
lockPref("devtools.f12_enabled", false)
lockPref("devtools.styleeditor.enabled", false)
lockPref("devtools.toolbox.host", "right")

/**
 * Hide battery level
 */
lockPref("dom.battery.enabled", false)

/**
 * Disable gamepad
 */
lockPref("dom.gamepad.enabled", false)
lockPref("dom.gamepad.extensions.enabled", false)

/**
 * Script loader:
 *  - disable speculative async (somehow prevented websites from loading)
 *  - activate speculative link preload
 *  - activate speculative "off the main thread" parsing
 */
lockPref("dom.script_loader.external_scripts.speculate_async.enabled", false)
lockPref("dom.script_loader.external_scripts.speculate_link_preload.enabled", true)
lockPref("dom.script_loader.external_scripts.speculative_omt_parse.enabled", true)

/**
 * Ignore touch events
 */
lockPref("dom.w3c_touch_events.enabled", 0)

/**
 * Disable pocket
 */
lockPref("extensions.pocket.enabled", false)

/**
 * Set preferred fonts
 */
lockPref("font.name.monospace.x-western", "Dejavu Sans Mono")
lockPref("font.name.sans-serif.x-western", "Twitter Color Emoji")
lockPref("font.name.serif.x-western", "Noto Serif")

/**
 * Hide fullscreen notice
 */
lockPref("full-screen-api.warning.timeout", 0)

/**
 * Smoothen scrolling
 * [Smoothfox]
 */
lockPref("general.smoothScroll.currentVelocityWeighting", "1")
lockPref("general.smoothScroll.msdPhysics.motionBeginSpringConstant", 600)
lockPref("general.smoothScroll.msdPhysics.regularSpringConstant", 650)
lockPref("general.smoothScroll.msdPhysics.slowdownSpringConstant", 250)
lockPref("general.smoothScroll.stopDecelerationWeighting", "1")

/**
 * GFX:
 *  - increase canvas cache size
 *  - increase font cache size
 *  - use hardware acceleration
 *  - enforce webrender compositor
 * [Fastfox]
 */
lockPref("gfx.canvas.accelerated.cache-size", 512)
lockPref("gfx.content.skia-font-cache-size", 20)
lockPref("gfx.webrender.all", true)
lockPref("gfx.webrender.compositor.force-enabled", true)

/**
 * Enable Firefox sync
 */
lockPref("identity.fxaccounts.enabled", true)

/**
 * Increase image decode blocks
 * [Fastfox]
 */
lockPref("image.mem.decode_bytes_at_a_time", 32768)

/**
 * Request languages for UI
 */
lockPref("intl.locale.requested", "de,en-GB,en-US")

/**
 * Enforce hardware acceleration
 * [Fastfox]
 */
lockPref("layers.acceleration.force-enabled", true)

/**
 * Media optimizations
 * [Fastfox]
 */
lockPref("media.cache_readahead_limit", 7200)
lockPref("media.cache_resume_threshold", 3600)

/**
 * Allow DRM content
 */
lockPref("media.eme.enabled", true)

/**
 * GMP:
 *  - enable hardware acceleration
 *  - enable hardware accelerated multithreading
 *  - prefer hardware acceleration
 * [Fastfox]
 */
lockPref("media.gmp.decoder.enabled", true)
lockPref("media.gmp.decoder.multithreaded", true)
lockPref("media.gmp.decoder.preferred", true)
lockPref("media.gmp.encoder.enabled", true)
lockPref("media.gmp.encoder.multithreaded", true)
lockPref("media.gmp.encoder.preferred", true)

/**
 * Disable picture-in-picture
 */
lockPref("media.videocontrols.picture-in-picture.enabled", false)
lockPref("media.videocontrols.picture-in-picture.urlbar-button.enabled", false)

/**
 * Disable speech services
 */
lockPref("media.webspeech.recognition.enable", false)
lockPref("media.webspeech.synth.enabled", false)

/**
 * Slow down scrolling
 */
lockPref("mousewheel.default.delta_multiplier_x", 80)
lockPref("mousewheel.default.delta_multiplier_y", 80)

/**
 * Network:
 *  - increase network buffer size
 *  - increase DNS cache duration
 *  - HTTP:
 *    - disallow 0rtt in HTTP/3, because it loses forward-secrecy
 *    - increase maximum connections
 *    - allow more ressources for pacing
 *  - IDN (internationalized domain name):
 *    - show punycode to prevent domain spoofing
 * [Fastfox]
 *    - allow 10 parallel prefetches
 *  - activate prefetching next website
 */
lockPref("network.buffer.cache.count", 48)
lockPref("network.buffer.cache.size", 65535)
lockPref("network.dnsCacheExpiration", 3600)
lockPref("network.http.http3.enable_0rtt", false)
lockPref("network.http.max-connections", 1800)
lockPref("network.http.max-persistent-connections-per-server", 10)
lockPref("network.http.max-urgent-start-excessive-connections-per-host", 5)
lockPref("network.http.pacing.requests.enabled", false)
lockPref("network.http.speculative-parallel-limit", 10)
lockPref("network.IDN_show_punycode", true)
lockPref("network.predictor.enabled", true)
lockPref("network.prefetch-next", true)

/**
 * PDF:
 *  - ignore file permissions
 *  - disallow Javascript
 *  - show outline in sidebar
 */
lockPref("pdfjs.enablePermissions", false)
lockPref("pdfjs.enableScripting", false)
lockPref("pdfjs.sidebarViewOnLoad", 2)

/**
 * On shutdown:
 *  - do not clear cache
 *  - do not clear cookies/storage
 *  - do not clear downloads
 *  - do not clear history
 */
lockPref("privacy.clearOnShutdown.cache", false)
lockPref("privacy.clearOnShutdown.downloads", false)
lockPref("privacy.clearOnShutdown.history", false)
lockPref("privacy.clearOnShutdown_v2.browsingHistoryAndDownloads", false)
lockPref("privacy.clearOnShutdown_v2.cache", false)
lockPref("privacy.clearOnShutdown_v2.cookiesAndStorage", false)
lockPref("privacy.clearOnShutdown_v2.history", false)
lockPref("privacy.clearOnShutdown_v2.historyFormDataAndDownloads", false)
lockPref("privacy.clearOnShutdown_v2.sessions", false)
lockPref("privacy.history.custom", true)
lockPref("privacy.sanitize.clearOnShutdown.hasMigratedToNewPrefs3", true)

/**
 * Disable firstparty isolation
 * [https://librewolf.net/docs/faq]
 */
lockPref("privacy.firstparty.isolate", false)

/**
 * Disable strict RFP
 */
lockPref("privacy.resistFingerprinting", false)

/**
 * Disable reader mode
 */
lockPref("reader.parse-on-load.enabled", false)

/**
 * Disable OCSP
 * [Securefox]
 */
lockPref("security.OCSP.enabled", 0)

/**
 * TLS:
 *  - disable 0rtt, because it loses forward-secrecy
 *  - disable deprecated TLS versions
 */
lockPref("security.tls.enable_0rtt_data", false)
lockPref("security.tls.version.enable-deprecated", false)

/**
 * SSL3:
 *  - disallow outdated ciphersuites
 *    - SHA
 *    - RSA
 */
lockPref("security.ssl3.deprecated.rsa_des_ede3_sha", false)
lockPref("security.ssl3.dhe_rsa_aes_128_sha", false)
lockPref("security.ssl3.dhe_rsa_aes_256_sha", false)
lockPref("security.ssl3.ecdhe_ecdsa_aes_128_sha", false)
lockPref("security.ssl3.ecdhe_ecdsa_aes_256_sha", false)
lockPref("security.ssl3.ecdhe_rsa_aes_128_sha", false)
lockPref("security.ssl3.ecdhe_rsa_aes_256_sha", false)
lockPref("security.ssl3.rsa_aes_128_gcm_sha256", false)
lockPref("security.ssl3.rsa_aes_128_sha", false)
lockPref("security.ssl3.rsa_aes_256_sha", false)
lockPref("security.ssl3.rsa_aes_256_gcm_sha384", false)

/**
 * Sync:
 *  - hardcode addons trust
 *  - configure sync engines
 */
lockPref("services.sync.addons.trustedSourceHostnames", "addons.mozilla.org")
lockPref("services.sync.declinedEngines", "tabs,passwords,creditcards,prefs")
lockPref("services.sync.engine.addresses", false)
lockPref("services.sync.engine.creditcards", false)
lockPref("services.sync.engine.passwords", false)
lockPref("services.sync.engine.prefs", false)
lockPref("services.sync.engine.tabs", false)

/**
 * Disable breach alerts
 */
lockPref("signon.management.page.breach-alerts.enabled", false)

/**
 * Enable webgl
 */
lockPref("webgl.disabled", false)

/**
 * Restore default context menus
 */
lockPref("widget.gtk.native-context-menus", false)
